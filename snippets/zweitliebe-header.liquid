{% comment %}
  ZWEITLIEBE HEADER - REBUY.DE INSPIRED
  Klare Navigation mit Trust-Indicators und Conversion-Fokus
{% endcomment %}

<!-- Trust Strip (oberste Zeile) -->
<div class="trust-strip" style="background: var(--primary-green); color: white; padding: var(--space-xs) 0; font-size: var(--text-xs);">
  <div class="container">
    <div class="trust-messages" style="display: flex; justify-content: center; align-items: center; gap: var(--space-xl); flex-wrap: wrap;">
      <div class="trust-item" style="display: flex; align-items: center; gap: var(--space-xs);">
        <svg width="14" height="14" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
        </svg>
        <span>Kostenloser Versand ab 10€</span>
      </div>
      
      <div class="trust-item" style="display: flex; align-items: center; gap: var(--space-xs);">
        <svg width="14" height="14" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
        </svg>
        <span>36 Monate Garantie</span>
      </div>
      
      <div class="trust-item" style="display: flex; align-items: center; gap: var(--space-xs);">
        <svg width="14" height="14" fill="currentColor" viewBox="0 0 20 20">
          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
        </svg>
        <span>4.8/5 Kundenbewertung</span>
      </div>
      
      <div class="trust-item" style="display: flex; align-items: center; gap: var(--space-xs);">
        <svg width="14" height="14" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" />
        </svg>
        <span>180.000+ Bücher verfügbar</span>
      </div>
    </div>
  </div>
</div>

<!-- Main Header -->
<header class="main-header" style="background: white; box-shadow: var(--shadow-card); position: sticky; top: 0; z-index: 100;">
  <div class="container">
    <div class="header-content" style="display: flex; align-items: center; justify-content: space-between; padding: var(--space-md) 0;">
      
      <!-- Logo Section -->
      <div class="logo-section" style="display: flex; align-items: center; gap: var(--space-md);">
        <a href="{{ routes.root_url }}" style="text-decoration: none; display: flex; align-items: center; gap: var(--space-sm);">
          {% if settings.logo %}
            <img src="{{ settings.logo | img_url: '120x60' }}" 
                 alt="{{ shop.name }}"
                 style="height: 40px; width: auto;">
          {% else %}
            <div style="display: flex; align-items: center; gap: var(--space-sm);">
              <div style="width: 40px; height: 40px; background: var(--primary-green); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center;">
                <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                  <path d="M4 2h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm0 2v16h16V4H4zm2 2h12v2H6V6zm0 4h12v2H6v-2zm0 4h8v2H6v-2z"/>
                </svg>
              </div>
              <span style="font-size: var(--text-2xl); font-weight: var(--font-bold); color: var(--primary-green);">
                {{ shop.name }}
              </span>
            </div>
          {% endif %}
        </a>

        <!-- Mobile Menu Toggle -->
        <button type="button" class="mobile-menu-toggle" style="display: none; background: none; border: none; padding: var(--space-sm); cursor: pointer;" aria-label="Menü öffnen">
          <svg width="24" height="24" fill="var(--gray-700)" viewBox="0 0 24 24">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>
      </div>

      <!-- Search Bar (Center) -->
      <div class="search-section" style="flex: 1; max-width: 600px; margin: 0 var(--space-xl);">
        <form action="{{ routes.search_url }}" method="get" class="search-container" style="position: relative;">
          <div style="display: flex; align-items: center;">
            <input type="search" 
                   name="q" 
                   value="{{ search.terms | escape }}"
                   placeholder="ISBN, Titel, Autor oder Kategorie..."
                   style="width: 100%; padding: var(--space-md) var(--space-lg) var(--space-md) var(--space-md); border: none; border-radius: var(--radius-lg) 0 0 var(--radius-lg); font-size: var(--text-base); outline: none;">
            
            <!-- Search Categories Dropdown -->
            <select name="type" style="border: none; background: var(--gray-100); padding: var(--space-md); font-size: var(--text-sm); outline: none;">
              <option value="">Alle</option>
              <option value="product">Bücher</option>
              <option value="author">Autor</option>
              <option value="isbn">ISBN</option>
              <option value="publisher">Verlag</option>
            </select>
            
            <button type="submit" class="btn-primary" style="border-radius: 0 var(--radius-lg) var(--radius-lg) 0; padding: var(--space-md) var(--space-xl); margin: 0;">
              <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
              </svg>
            </button>
          </div>
        </form>
      </div>

      <!-- Header Actions -->
      <div class="header-actions" style="display: flex; align-items: center; gap: var(--space-lg);">
        
        <!-- Customer Account -->
        <div class="account-section" style="display: flex; align-items: center; gap: var(--space-xs);">
          {% if customer %}
            <a href="{{ routes.account_url }}" style="text-decoration: none; display: flex; align-items: center; gap: var(--space-xs); color: var(--gray-700); padding: var(--space-sm);">
              <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
              </svg>
              <span style="font-size: var(--text-sm); font-weight: var(--font-medium);">Mein Konto</span>
            </a>
          {% else %}
            <a href="{{ routes.account_login_url }}" style="text-decoration: none; display: flex; align-items: center; gap: var(--space-xs); color: var(--gray-700); padding: var(--space-sm);">
              <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z" clip-rule="evenodd" />
              </svg>
              <span style="font-size: var(--text-sm); font-weight: var(--font-medium);">Anmelden</span>
            </a>
          {% endif %}
        </div>

        <!-- Cart -->
        <div class="cart-section" style="position: relative;">
          <a href="{{ routes.cart_url }}" style="text-decoration: none; display: flex; align-items: center; gap: var(--space-xs); color: var(--gray-700); padding: var(--space-sm); transition: all 0.2s ease;">
            <div style="position: relative;">
              <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                <path d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" />
              </svg>
              {% if cart.item_count > 0 %}
                <span class="cart-badge" style="position: absolute; top: -8px; right: -8px; background: var(--error-red); color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: var(--text-xs); font-weight: var(--font-bold);">
                  {{ cart.item_count }}
                </span>
              {% endif %}
            </div>
            <div style="display: flex; flex-direction: column; align-items: flex-start;">
              <span style="font-size: var(--text-sm); font-weight: var(--font-medium);">Warenkorb</span>
              <span style="font-size: var(--text-xs); color: var(--gray-500);">
                {% if cart.total_price > 0 %}{{ cart.total_price | money }}{% else %}Leer{% endif %}
              </span>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>
</header>

<!-- Navigation Bar -->
<nav class="main-navigation" style="background: var(--bg-secondary); border-bottom: 1px solid var(--gray-200);">
  <div class="container">
    <div class="nav-content" style="display: flex; align-items: center; justify-content: space-between; padding: var(--space-sm) 0;">
      
      <!-- Main Categories -->
      <div class="nav-categories" style="display: flex; align-items: center; gap: var(--space-lg);">
        <!-- Kategorien Dropdown -->
        <div class="category-dropdown" style="position: relative;">
          <button type="button" class="btn-primary" style="display: flex; align-items: center; gap: var(--space-sm); font-size: var(--text-sm);">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" />
            </svg>
            Alle Kategorien
            <svg width="12" height="12" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          </button>
        </div>

        <!-- Quick Categories -->
        <div class="quick-categories" style="display: flex; align-items: center; gap: var(--space-lg);">
          <a href="/collections/romance" style="text-decoration: none; color: var(--gray-700); font-weight: var(--font-medium); font-size: var(--text-sm); padding: var(--space-sm) 0; transition: color 0.2s ease;">
            Romance
          </a>
          <a href="/collections/thriller" style="text-decoration: none; color: var(--gray-700); font-weight: var(--font-medium); font-size: var(--text-sm); padding: var(--space-sm) 0; transition: color 0.2s ease;">
            Thriller
          </a>
          <a href="/collections/fantasy" style="text-decoration: none; color: var(--gray-700); font-weight: var(--font-medium); font-size: var(--text-sm); padding: var(--space-sm) 0; transition: color 0.2s ease;">
            Fantasy
          </a>
          <a href="/collections/biografien" style="text-decoration: none; color: var(--gray-700); font-weight: var(--font-medium); font-size: var(--text-sm); padding: var(--space-sm) 0; transition: color 0.2s ease;">
            Biografien
          </a>
          <a href="/collections/sachbuecher" style="text-decoration: none; color: var(--gray-700); font-weight: var(--font-medium); font-size: var(--text-sm); padding: var(--space-sm) 0; transition: color 0.2s ease;">
            Sachbücher
          </a>
        </div>
      </div>

      <!-- Special Offers -->
      <div class="special-offers" style="display: flex; align-items: center; gap: var(--space-md);">
        <a href="/collections/sale" class="offer-link" style="text-decoration: none; display: flex; align-items: center; gap: var(--space-xs); background: var(--error-red); color: white; padding: var(--space-xs) var(--space-sm); border-radius: var(--radius-sm); font-size: var(--text-sm); font-weight: var(--font-bold);">
          🔥 Sale
        </a>
        
        <a href="/collections/new-arrivals" class="offer-link" style="text-decoration: none; display: flex; align-items: center; gap: var(--space-xs); background: var(--success-green); color: white; padding: var(--space-xs) var(--space-sm); border-radius: var(--radius-sm); font-size: var(--text-sm); font-weight: var(--font-bold);">
          ✨ Neuheiten
        </a>
        
        <a href="/collections/bestseller" class="offer-link" style="text-decoration: none; display: flex; align-items: center; gap: var(--space-xs); background: var(--warning-amber); color: white; padding: var(--space-xs) var(--space-sm); border-radius: var(--radius-sm); font-size: var(--text-sm); font-weight: var(--font-bold);">
          ⭐ Bestseller
        </a>
      </div>
    </div>
  </div>
</nav>

<!-- Mobile Styles -->
<style>
@media (max-width: 768px) {
  .trust-strip .trust-messages {
    gap: var(--space-md);
    font-size: 11px;
  }
  
  .trust-item span {
    display: none;
  }
  
  .trust-item svg {
    margin: 0;
  }
  
  .mobile-menu-toggle {
    display: block !important;
  }
  
  .search-section {
    order: 3;
    margin: var(--space-md) 0 0 0 !important;
    max-width: 100% !important;
    flex: none !important;
    width: 100%;
  }
  
  .header-content {
    flex-wrap: wrap;
  }
  
  .header-actions .account-section span,
  .header-actions .cart-section div div {
    display: none;
  }
  
  .quick-categories {
    display: none;
  }
  
  .special-offers {
    gap: var(--space-xs);
  }
  
  .special-offers .offer-link {
    font-size: var(--text-xs);
    padding: var(--space-xs);
  }
}

@media (max-width: 480px) {
  .trust-strip {
    display: none;
  }
  
  .main-navigation {
    padding: var(--space-xs) 0;
  }
  
  .nav-content {
    flex-direction: column;
    gap: var(--space-sm);
    align-items: flex-start;
  }
}

/* Hover Effects */
.quick-categories a:hover,
.header-actions a:hover {
  color: var(--primary-green) !important;
}

.cart-section a:hover .cart-badge {
  background: var(--primary-green) !important;
}
</style> 